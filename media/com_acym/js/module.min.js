var task,formName;function submitAcymForm(e,t,a){task=e,formName=t,a=void 0===a?"acySubmitSubForm":a;var r="acym-captcha";t&&(r=t+"-captcha");var l=document.querySelector("#"+r+'[class="g-recaptcha"][data-size="invisible"]');if(!l||"object"!=typeof grecaptcha)return window[a]();var s=l.getAttribute("grcID");return s||(s=grecaptcha.render(r,{sitekey:l.getAttribute("data-sitekey"),callback:a,size:"invisible","expired-callback":"resetRecaptcha"}),l.setAttribute("grcID",s)),grecaptcha.getResponse(s)?window[a]():(grecaptcha.execute(s),!1)}function resetRecaptcha(){var e="acym-captcha";formName&&(e=formName+"-captcha");var t=document.querySelector("#"+e+'[class="g-recaptcha"][data-size="invisible"]');if(t){var a=t.getAttribute("grcID");grecaptcha.reset(a)}}function acySubmitSubForm(){var e=document[formName],t=acymModule.emailRegex;let a,r="";e.elements||(e=e[0].elements["user[email]"]&&e[0].elements["user[email]"].value&&t.test(e[0].elements["user[email]"].value)?e[0]:e[e.length-1]);let l=document.querySelectorAll("#"+formName+" .invalid");if(0!=l.length)for(a=0;a<l.length;a++)l[a].classList.remove("invalid");let s,n,i,m,c,d=e.elements["user[email]"];d.value!=acymModule.EMAILCAPTION&&(d.value=d.value.replace(/ /g,"")),d&&d.value!=acymModule.EMAILCAPTION&&t.test(d.value)||(r=acymModule.VALID_EMAIL,d.classList.add("invalid"));let u=document.querySelectorAll("#"+formName+' [type="radio"][data-required]');if(u.length>0){for(s="",n=0,a=0;a<u.length;a++)i=JSON.parse(u[a].getAttribute("data-required")),""!==s&&s!=u[a].getAttribute("name")&&0===n?(r+="\r\n"+(c=JSON.parse(u[a-1].getAttribute("data-required"))).message,acymAddInvalidClass(formName,s)):""!==s&&s!=u[a].getAttribute("name")&&n>0&&(n=0),u[a].checked&&n++,s=u[a].getAttribute("name");0===n&&(r+="\r\n"+i.message,acymAddInvalidClass(formName,s))}let o=document.querySelectorAll("#"+formName+' [type="checkbox"][data-required]');if(o.length>0){for(s="",n=0,a=0;a<o.length;a++)i=JSON.parse(o[a].getAttribute("data-required")),""!==s&&s!=o[a].getAttribute("name").slice(0,o[a].getAttribute("name").lastIndexOf("["))&&0===n?(r+="\r\n"+(c=JSON.parse(o[a-1].getAttribute("data-required"))).message,acymAddInvalidClass(formName,s)):""!==s&&s!=o[a].getAttribute("name").slice(0,o[a].getAttribute("name").lastIndexOf("["))&&n>0&&(n=0),o[a].checked&&n++,s=o[a].getAttribute("name").slice(0,o[a].getAttribute("name").lastIndexOf("["));0===n&&(r+="\r\n"+i.message,acymAddInvalidClass(formName,s))}let g=document.querySelectorAll("#"+formName+' [acym-field-type="date"][data-required]');if(0!=g.length){let e;for(s="",n=0,a=0;a<g.length;a++)e=g[a],i=JSON.parse(e.getAttribute("data-required")),""!==s&&s!=e.getAttribute("name").slice(0,e.getAttribute("name").lastIndexOf("["))&&n<3?(n=0,r+="\r\n"+(c=JSON.parse(g[a-1].getAttribute("data-required"))).message):""!==s&&s!=e.getAttribute("name").slice(0,e.getAttribute("name").lastIndexOf("["))&&n>0&&(n=0),""!=e.value?n++:e.classList.add("invalid"),s=g[a].getAttribute("name").slice(0,g[a].getAttribute("name").lastIndexOf("["));n<3&&(r+="\r\n"+i.message)}let f=document.querySelectorAll("#"+formName+' [data-required]:not([type="checkbox"]):not([type="radio"]):not([acym-field-type="date"])');if(f.length>0)for(a=0;a<f.length;a++)i=JSON.parse(f[a].getAttribute("data-required")),-1===["text","textarea","single_dropdown","multiple_dropdown","phone"].indexOf(i.type)||""!==f[a].value&&"0"!=f[a].value||(r+="\r\n"+i.message,f[a].classList.add("invalid")),"file"===i.type&&0===f[a].files.length&&(r+="\r\n"+i.message,f[a].classList.add("invalid"));let y=document.querySelectorAll("#"+formName+" [data-authorized-content]");if(y.length>0)for(a=0;a<y.length;a++){let e=JSON.parse(y[a].getAttribute("data-authorized-content"));m="","number"===e[0]?m=/^[0-9]+$/:"letters"===e[0]?m=/^[a-zA-Z]+$/:"numbers_letters"===e[0]?m=/^[a-zA-Z0-9]+$/:"regex"===e[0]&&(m=new RegExp(e.regex)),""===m||m.test(y[a].value)||(y[a].classList.add("invalid"),r+="\r\n"+e.message)}if(r.length>0)return alert(r),!1;if(e.elements.hiddenlists.value.length<1){var p=!1,v=e.elements["subscription[]"];if(v&&(void 0===v.value||0===v.value.length)){for(b=0;b<v.length;b++)v[b].checked&&(p=!0);if(!p)return alert(acymModule.NO_LIST_SELECTED),!1}}if("unsubscribe"!==task){var A=e.elements.terms;if(A&&!A.checked)return"undefined"!=typeof acymModule&&alert(acymModule.ACCEPT_TERMS),!1;if("undefined"!=typeof acymModule&&void 0!==acymModule["excludeValues"+formName])for(var h in acymModule["excludeValues"+formName])acymModule["excludeValues"+formName].hasOwnProperty(h)&&e.elements["user["+h+"]"]&&e.elements["user["+h+"]"].value==acymModule["excludeValues"+formName][h]&&(e.elements["user["+h+"]"].value="")}if("undefined"!=typeof ga&&"unsubscribe"!==task?ga("send","pageview","subscribe"):"undefined"!=typeof ga&&ga("send","pageview","unsubscribe"),taskField=e.task,taskField.value=task,!e.elements.ajax||!e.elements.ajax.value||"0"==e.elements.ajax.value)return e.submit(),!1;var N=document.getElementById(formName),x=new FormData(N);N.className+=" acym_module_loading",N.style.filter="alpha(opacity=50)",N.style.opacity="0.5";let S=document.querySelectorAll(".responseContainer.acym_module_error.message_"+formName);Array.prototype.forEach.call(S,function(e){e.parentNode.removeChild(e)});var I=new XMLHttpRequest;return I.open("POST",N.action),I.onload=function(){var e="Ajax Request Failure",t="error";if(200===I.status){var a=JSON.parse(I.responseText);e=a.message,t=a.type}acymDisplayAjaxResponse(decodeURIComponent(e),t,formName)},I.send(x),!1}function acymAddInvalidClass(e,t){let a=document.querySelectorAll("#"+e+' [name^="'+t+'"]');for(let e=0;e<a.length;e++)a[e].classList.add("invalid");return!0}function acymDisplayAjaxResponse(e,t,a,r){let l=document.createElement("div"),s=document.getElementById("acym_fulldiv_"+a);s.firstChild?s.insertBefore(l,s.firstChild):s.appendChild(l),l.className="responseContainer";let n=document.getElementById(a),i=n.className,m="acym_module_loading",c=i.replace(" "+m,"",i);c==i&&(c=i.replace(m+" ","",i)),c==i&&(c=i.replace(m,"",i)),n.className=c,l.innerHTML=e,"success"==t?l.className+=" acym_module_success":(l.className+=" acym_module_error",n.style.opacity="1"),(r||"success"==t)&&(n.style.display="none"),l.className+=" message_"+a,l.className+=" slide_open"}